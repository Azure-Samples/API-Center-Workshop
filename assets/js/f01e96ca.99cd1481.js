"use strict";(self.webpackChunkworkshop=self.webpackChunkworkshop||[]).push([[666],{6846:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"develop/inventory/env-and-deploys","title":"Environments and Deployments","description":"An API Environment is a location where an API runtime could be deployed. Each environment is aligned with a lifecycle stage and may also include information about developer portal or management interfaces.","source":"@site/docs/develop/inventory/env-and-deploys.md","sourceDirName":"develop/inventory","slug":"/develop/inventory/env-and-deploys","permalink":"/API-Center-Workshop/docs/develop/inventory/env-and-deploys","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Register your APIs","permalink":"/API-Center-Workshop/docs/develop/inventory/register-apis"},"next":{"title":"Import APIs from APIM","permalink":"/API-Center-Workshop/docs/develop/inventory/import-from-apim"}}');var i=o(4848),s=o(8453);const r={},d="Environments and Deployments",a={},l=[{value:"Add an Environment",id:"add-an-environment",level:2},{value:"Add a Deployment",id:"add-a-deployment",level:2}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"environments-and-deployments",children:"Environments and Deployments"})}),"\n",(0,i.jsxs)(n.p,{children:["An ",(0,i.jsx)(n.strong,{children:"API Environment"})," is a location where an API runtime could be deployed. Each environment is aligned with a lifecycle stage and may also include information about developer portal or management interfaces."]}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.strong,{children:"Deployment"})," is a location/ address where users can access an API. An API can have multiple deployments, each with a specific API definition."]}),"\n",(0,i.jsx)(n.h2,{id:"add-an-environment",children:"Add an Environment"}),"\n",(0,i.jsxs)(n.p,{children:["In API Center, you can add multiple environments to represent your real-world deployment scenarios. Let's add a Dev environment for our APIs, by running ",(0,i.jsx)(n.code,{children:"az apic environment create -g RG-NAME -n APIC-NAME --title Contoso-Dev --environment-id contoso-dev --type development"})]}),"\n",(0,i.jsx)(n.p,{children:"Let's also create:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Testing"}),", ",(0,i.jsx)(n.code,{children:"az apic environment create -g RG-NAME -n APIC-NAME --title Contoso-Test --environment-id contoso-test --type testing"})," and"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Production"}),", ",(0,i.jsx)(n.code,{children:"az apic environment create -g RG-NAME -n APIC-NAME --title Contoso-Prod --environment-id contoso-prod --type production"})," environments."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Note",type:"tip",children:(0,i.jsxs)(n.p,{children:["Remember to replace ",(0,i.jsx)(n.em,{children:"RG-NAME"})," with the name of your resource-group and ",(0,i.jsx)(n.em,{children:"APIC-NAME"})," with the name of your API Center."]})}),"\n",(0,i.jsxs)(n.p,{children:["Your newly created environments should show up under the ",(0,i.jsx)(n.strong,{children:"Environments"})," section of your API Center."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Add an environment",src:o(8423).A+"",width:"2543",height:"973"})}),"\n",(0,i.jsx)(n.h2,{id:"add-a-deployment",children:"Add a Deployment"}),"\n",(0,i.jsx)(n.p,{children:"Now, you'll add a deployment by associating your APIs with the environments you created in the step above, as below:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create deployments for the services & petsCompanion APIs, associated with the Dev environment: ",(0,i.jsx)(n.code,{children:'az apic api deployment create -g RG-NAME -n APIC-NAME --deployment-id "v1-services-deployment" --title "V1 Services Deployment" --description "Version 1 of the Contoso services deployment." --api-id contoso-airlines-services --environment-id "/workspaces/default/environments/contoso-dev" --definition-id "/workspaces/default/apis/contoso-airlines-services/versions/v1/definitions/contoso-airlines-services" --server \'{"runtimeUri":["DOMAIN"]}\''})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'az apic api deployment create -g RG-NAME -n APIC-NAME --deployment-id "v1-pets-deployment" --title "V1 Pets Deployment" --description "Version 1 of the Contoso pets deployment." --api-id contoso-airlines-pets --environment-id "/workspaces/default/environments/contoso-dev" --definition-id "/workspaces/default/apis/contoso-airlines-pets/versions/v1/definitions/contoso-airlines-pets" --server \'{"runtimeUri":["DOMAIN"]}\''})}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{title:"Note",type:"tip",children:[(0,i.jsxs)(n.p,{children:["Remember to replace ",(0,i.jsx)(n.em,{children:"RG-NAME"})," with the name of your resource-group, ",(0,i.jsx)(n.em,{children:"APIC-NAME"})," with the name of your API Center and ",(0,i.jsx)(n.em,{children:"DOMAIN"})," with the domains of your deployed APIs respectively."]}),(0,i.jsx)(n.p,{children:"If you used different names and IDs for your environments in the previous step, ensure you update them in the command before executing"})]}),"\n",(0,i.jsx)(n.p,{children:"Now, if you refresh your API Center and expand the Deployment section for each API, you should find the 2 deployments."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Add a deployment",src:o(9096).A+"",width:"2547",height:"998"})}),"\n",(0,i.jsx)(n.p,{children:"We will now jump into how you can govern your organizational APIs with API Center."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},9096:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/deployments-77e7398246d88b3ea376dedc9a8a6f6d.jpg"},8423:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/environment-a469f92a160d71df9e43b211f2b420ec.jpg"},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>d});var t=o(6540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);