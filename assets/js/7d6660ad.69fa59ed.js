"use strict";(self.webpackChunkworkshop=self.webpackChunkworkshop||[]).push([[907],{1421:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"develop/governance/api-design","title":"API Design Conformance","description":"Persona: **API Developer**","source":"@site/docs/develop/governance/api-design.md","sourceDirName":"develop/governance","slug":"/develop/governance/api-design","permalink":"/API-Center-Workshop/docs/develop/governance/api-design","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/develop/governance/api-design.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Import APIs","permalink":"/API-Center-Workshop/docs/develop/inventory/import-apis"},"next":{"title":"Detect Breaking Changes","permalink":"/API-Center-Workshop/docs/develop/governance/breaking-change"}}');var i=t(4848),o=t(8453);const r={},a="API Design Conformance",c={},d=[{value:"Define an API Style Guide",id:"define-an-api-style-guide",level:2},{value:"Deploy rulesets to API Center",id:"deploy-rulesets-to-api-center",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"api-design-conformance",children:"API Design Conformance"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Persona: ",(0,i.jsx)(n.strong,{children:"API Developer"})]})}),"\n",(0,i.jsx)(n.p,{children:"API Governance is the practice of establishing and enforcing guidelines and standards for API design, development, and management. It ensures that APIs are consistent, secure, and easy to consume. API governance is essential for organizations that are building APIs to ensure that they are well-designed, secure, and easy to consume."}),"\n",(0,i.jsx)(n.p,{children:"API Center allows your organization to shift-left API governance by enforcing API design conformance at the time of API creation. Contoso wants to adopt this approach to ensure that all APIs are created according to the organization's API design standards from the beginning, to avoid costly rework later."}),"\n",(0,i.jsx)(n.h2,{id:"define-an-api-style-guide",children:"Define an API Style Guide"}),"\n",(0,i.jsx)(n.admonition,{title:"Note",type:"tip",children:(0,i.jsxs)(n.p,{children:["To run shift-left API Design conformity checks in VS Code, API Center uses ",(0,i.jsx)(n.strong,{children:"Spectral"})," as the linting engine. To use this feature, you need to install the Spectral extension for VS Code. You can download it from ",(0,i.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=stoplight.spectral",children:"here"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["If you navigate to ",(0,i.jsx)(n.code,{children:"resources/rulesets"})," folder, you will find a custom ruleset that extends the OpenAPI ruleset and adds a new rule."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Custom ruleset",src:t(7081).A+"",width:"1453",height:"660"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Open the Command Pallete on VS Code (Ctrl+Shift+P) and select ",(0,i.jsx)(n.code,{children:"Azure API Center: Set Active API Style Guide"})," and hit Enter."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"Select Local File"})," and navigate to the ",(0,i.jsx)(n.code,{children:"resources/rulesets"})," folder and select the ",(0,i.jsx)(n.code,{children:"oas.yaml"})," file."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Once you've set the active API style guide, you immediately see errors in the API definition(s) that violate the rules defined in the style guide."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"API Design check errors",src:t(3e3).A+"",width:"1887",height:"1095"})}),"\n",(0,i.jsx)(n.p,{children:"Check the errors in the API definition(s) and fix them to conform to the API style guide."}),"\n",(0,i.jsxs)(n.admonition,{title:"BONUS",type:"tip",children:[(0,i.jsx)(n.p,{children:"You can use GitHub Copilot to help you fix the errors faster."}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"API Design check errors fix with GH Copilot",src:t(8277).A+"",width:"1670",height:"859"})})]}),"\n",(0,i.jsx)(n.h3,{id:"deploy-rulesets-to-api-center",children:"Deploy rulesets to API Center"}),"\n",(0,i.jsx)(n.admonition,{title:"Note",type:"tip",children:(0,i.jsxs)(n.p,{children:["Ensure that you are on the ",(0,i.jsx)(n.em,{children:"pre-release"})," version of the API Center VS Code extension to customize your ruleset\r\n",(0,i.jsx)(n.img,{alt:"API Center extension pre-release version",src:t(9996).A+"",width:"981",height:"301"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Click on the API Center icon in the VS Code sidebar and click on ",(0,i.jsx)(n.code,{children:"Profiles"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Expand ",(0,i.jsx)(n.code,{children:"spectral-openapi"})," and open the ",(0,i.jsx)(n.code,{children:"ruleset.yml"})," file."]}),"\n",(0,i.jsxs)(n.li,{children:["Then modify the ",(0,i.jsx)(n.code,{children:"ruleset.yml"})," file to include the custom ruleset (You can copy the contents from the ",(0,i.jsx)(n.code,{children:"oas.yaml"})," file)."]}),"\n",(0,i.jsx)(n.li,{children:"Save."}),"\n",(0,i.jsxs)(n.li,{children:["Click on ",(0,i.jsx)(n.code,{children:"spectral-openapi"})," and select ",(0,i.jsx)(n.code,{children:"Deploy Rules to API Center"}),".\r\n",(0,i.jsx)(n.img,{alt:"Deploy rulesets to API Center",src:t(619).A+"",width:"1904",height:"1100"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Once the rules are deployed, the API Center will enforce the rules defined in the custom ruleset for all APIs created in the API Center. To see the linting results, you can go on the Azure portal and view the report."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"API Design check errors in Azure portal",src:t(7994).A+"",width:"1847",height:"982"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},3e3:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/api-design-errors-vscode-d41907f3f4cafff32d64bba90745c570.jpg"},9996:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/apic-vscode-pre-release-fb18a643d519420d24b9c20c9dcaba96.jpg"},619:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/deploy-rules-2937d425c8af0ab1872c3a138e539749.jpg"},8277:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/gh-copilot-design-fix-01f8bdcdcd4e726da4aebcf987d53ae4.jpg"},7081:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/oas-5a5c2a3d8ebe81b2c6b992318148d369.jpg"},7994:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/services-analysis-report-18517b5767670118374b2a7c7ee99cf3.jpg"},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(6540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);